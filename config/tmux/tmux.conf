# Tmux Configuration

# Source keybindings
source-file ~/.config/tmux/tmux.keys.conf

# General settings
set -sg escape-time 1
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",*:RGB"
set -g status-position top
set -g focus-events on
set -g history-limit 10000

# Theme (omarchy on Linux, dotfiles fallback on macOS)
if-shell "test -f ~/.config/omarchy/current/theme/tmux.conf" \
    "source-file ~/.config/omarchy/current/theme/tmux.conf" \
    "if-shell \"test -f ~/.config/themes/current/tmux.conf\" \
        \"source-file ~/.config/themes/current/tmux.conf\" \
        \"source-file ~/.config/themes/tokyo-night/tmux.conf\""

# TPM Plugins (install to ~/.tmux/plugins, not config dir)
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.tmux/plugins'
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'jaclu/tmux-menus'

# Plugin settings
set -g @continuum-restore 'on'
set -g @menus_trigger 'Space'

# Initialize TPM (keep at bottom)
# Linux (AUR package)
if-shell "test -f /usr/share/tmux-plugin-manager/tpm" \
    "run '/usr/share/tmux-plugin-manager/tpm'"
# macOS (Homebrew)
if-shell "test -f /opt/homebrew/opt/tpm/share/tpm/tpm" \
    "run '/opt/homebrew/opt/tpm/share/tpm/tpm'"
# Fallback (manual clone)
if-shell "test -f ~/.tmux/plugins/tpm/tpm" \
    "run '~/.tmux/plugins/tpm/tpm'"
